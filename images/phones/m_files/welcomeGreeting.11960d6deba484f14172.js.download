(window.webpackJsonp=window.webpackJsonp||[]).push([["welcomeGreeting"],{"/FrS":function(e,t,n){"use strict";var a,i,r;n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),function(e){e[e.HomeFromCookie=1]="HomeFromCookie",e[e.HomeFromPdp=2]="HomeFromPdp",e[e.HomeFromUserSet=3]="HomeFromUserSet"}(a||(a={})),function(e){e[e.DetectCurrentLocation=1]="DetectCurrentLocation",e[e.SpecifyLocation=2]="SpecifyLocation"}(i||(i={})),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(r||(r={}));const o={WeatherSpartanHomeLocationCookie:"weaSpartanHomeLocation",WeatherHomeLocationCookie:"weaPeregrineHomeLocation",WeatherSpartanDegreeSettingCookie:"weaSpartanDegreeType",WeatherDegreeSettingCookie:"weaPeregrineDegreeType",WeatherSpartanDetectLocationSetting:"weaDetectLocation",WeatherDetectLocationSetting:"weaPeregrineDetectLocation",EnglishLocationMarkets:"en-",cookieExpirationTimeInDays:365,cookieDomain:"msn.com"}},"6fq4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("HDSB");let i=!1;Object(a.a)()&&(window.addEventListener("keydown",()=>{i=!0}),window.addEventListener("mousedown",()=>{i=!1}))},"7oW3":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("G82u");class i{}i.updateLocationDisplayName=new a.a("UpdateLocationDisplayName"),i.fetchWeatherSummarySuccess=new a.a("FetchWeatherSummarySuccess"),i.updateLocationDetectionState=new a.a("UpdateLocationDetectionState"),i.SetLocationHome=new a.a("SetLocationHome")},B9k1:function(e,t){},JbJS:function(e,t){},Rlhs:function(e,t,n){"use strict";n.r(t),n.d(t,"ToolingInfo",(function(){return Z})),n.d(t,"WelcomeGreeting",(function(){return K})),n.d(t,"WelcomeGreetingActions",(function(){return C})),n.d(t,"WelcomeGreetingReducer",(function(){return M})),n.d(t,"WelcomeGreetingConnector",(function(){return N}));var a=n("JbJS"),i=n("ERkP"),r=n("5mwN"),o=n("wirn"),s=n("6fq4"),c=n("qGiF"),h=n("mwRD");const d="weather_today",l="i_welcome",g="i_weather";var u=n("YJhp");const p={23:u.a.RainShowersDay,26:u.a.SnowShowersDay,6:u.a.BlowingHail,5:u.a.Cloudy,20:u.a.LightSnow,91:u.a.Windy,27:u.a.Thunderstorms,10:u.a.FreezingRain,77:u.a.RainShowersDay,12:u.a.HazeSmoke,24:u.a.RainSnow,78:u.a.RainSnowShowersNight,9:u.a.Fog,3:u.a.PartlyCloudyDay,43:u.a.HailNight,16:u.a.HailDay,8:u.a.LightRain,15:u.a.HeavySnow,28:u.a.ClearNight,30:u.a.PartlyCloudyNight,14:u.a.ModerateRain,1:u.a.SunnyDay,7:u.a.BlowingSnow,50:u.a.RainShowersNight,82:u.a.SnowShowersNight},m={23:u.a.RainShowersDayWhite,26:u.a.SnowShowersDayWhite,6:u.a.BlowingHailWhite,5:u.a.CloudyWhite,20:u.a.LightSnowWhite,91:u.a.WindyWhite,27:u.a.ThunderstormsWhite,10:u.a.FreezingRainWhite,77:u.a.RainShowersDayWhite,12:u.a.HazeSmokeWhite,24:u.a.RainSnowWhite,78:u.a.RainSnowShowersNightWhite,9:u.a.FogWhite,3:u.a.PartlyCloudyDayWhite,43:u.a.HailNightWhite,16:u.a.HailDayWhite,8:u.a.LightRainWhite,15:u.a.HeavySnowWhite,28:u.a.ClearNightWhite,30:u.a.PartlyCloudyNightWhite,14:u.a.ModerateRainWhite,1:u.a.SunnyDayWhite,7:u.a.BlowingSnowWhite,50:u.a.RainShowersNightWhite,82:u.a.SnowShowersNightWhite},S={17:"8",31:"30",49:"14",41:"14",35:"8",4:"3",19:"8",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"1",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"12",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"28",102:"28",44:"8",46:"8",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"12",13:"8"};var y=n("6u3Q");class w extends r.a{constructor(e,...t){super(e,...t,!0),this.handledProps=Object.assign(Object.assign({},r.b),{canDisplayGreetingModule:void 0,greetingFadeIn:void 0,isImageEnabled:void 0,managedClasses:void 0,shouldAnimationStart:void 0,switchDegreeUnits:void 0,weatherProps:void 0,welcomeText:void 0}),this.onDegreeUnitClick=e=>{e.preventDefault(),this.props.switchDegreeUnits(this.props.weatherProps.alternateDegreeButtonProps.children.toString())},this.weatherUnitToggleRef=i.createRef(),this.state={showHiddenUnitContainer:!1}}componentDidUpdate(e){if(this.props.canDisplayGreetingModule&&this.props.shouldAnimationStart!==e.shouldAnimationStart){const e=document.getElementById(l),t=document.getElementById(g);this.props.greetingFadeIn(e,t,0,700)}}render(){if(this.props.canDisplayGreetingModule){super.render();const{isImageEnabled:e,welcomeText:t}=this.props,n=e?this.props.managedClasses.textWrapper_ImageDisplayed:this.props.managedClasses.textWrapper_ImageHidden;return i.createElement("div",Object.assign({},this.unhandledProps(),{className:super.generateClassNames(this.props.managedClasses.greeting_root)}),this.renderWeather(e,n),i.createElement("div",{className:n},i.createElement("span",{id:l,className:this.props.managedClasses.welcomeText},t)))}return null}renderWeather(e,t){const{weatherGlyph:n,weatherText:a,degreeUnit:r}=this.props.weatherProps;return i.createElement("a",{href:"#",className:this.props.managedClasses.weather_container+" "+t,id:g,onBlur:()=>{this.controlHiddenUnit(!1)},onFocus:this.onWeatherFocus.bind(this),onMouseOver:()=>{this.controlHiddenUnit(!0)},onMouseLeave:()=>{this.controlHiddenUnit(!1)}},i.createElement(c.a,null,t=>n&&n.imageSkyCode&&n.ariaLabel&&i.createElement("div",{className:this.props.managedClasses.weatherGlyph},i.createElement(o.a,{ariaLabel:n.ariaLabel,glyphType:this.getImage(t,e,n.imageSkyCode)}))),i.createElement("span",{className:this.props.managedClasses.weatherText},a),i.createElement("div",{className:this.props.managedClasses.weatherUnit_container},i.createElement("span",null,r),r&&(r.includes("C")||r.includes("F"))?this.renderHiddenUnitToggle():null))}renderHiddenUnitToggle(){const{alternateDegreeButtonProps:e}=this.props.weatherProps;return i.createElement("span",{className:this.state.showHiddenUnitContainer?this.props.managedClasses.visibleUnit_container:this.props.managedClasses.hiddenUnit_container},i.createElement("span",{className:this.props.managedClasses.unitDivider},"|"),i.createElement(h.a,Object.assign({},e,{className:this.props.managedClasses.alternateUnitText,onClick:this.onDegreeUnitClick,ref:this.weatherUnitToggleRef})))}onWeatherFocus(){s.a&&this.controlHiddenUnit(!0)}controlHiddenUnit(e){this.setState({showHiddenUnitContainer:e})}getImage(e,t,n){return function(e,t){const n=Object.prototype.hasOwnProperty.call(S,e)?S[e]:e;return(t?m:p)[n]}(n,Object(y.e)(e)||t)}}w.defaultProps={experienceName:"WelcomeGreeting"};var D=n("G82u");class C{}C.updateIsImageEnabled=new D.a("UpdateIsImageEnabled"),C.updateWeatherData=new D.a("UpdateWeatherData"),C.shouldAnimationStart=new D.a("ShouldAnimationStart"),C.disableGreetingModule=new D.a("DisableGreetingFeature");var b=n("ubYE"),f=n("D57K"),W=n("HHhA"),x=n("mL67"),v=n("jE1l"),O=n("9J8d"),U=n("Am8i"),I=n("/FrS"),A=n("7oW3"),T=n("pLgf"),j=n("WfnD"),E=n("s9+9"),H=n("I6Lx"),F=n("eoyk"),L=n("kpPY");function k(e,t){const{localizedStrings:n}=e,a=e.isNameInGreeting?function(e,t){const{localizedStrings:n}=e;if(t){const a=t.firstName,i=t.lastName;return e.showFirstNameOnly?a:e.showLastNameOnly?i:Object(L.a)(n.nameOrderingFull,a,i)}return""}(e,t):"";let i=n.welcomeText;return function(e){let t=0;for(const n of e.greetingsList){if(t>n.startHour||n.endHour<n.startHour)return!1;t=n.endHour}return!0}(e)&&(i=function(e,t){const{localizedStrings:n}=e;for(const a of e.greetingsList)if(t>=a.startHour&&t<a.endHour)return n[a.displayKey];return n.welcomeText}(e,(new Date).getHours())),a&&a.length<=e.maxNameCharacterCount&&n.greetingFormat&&(i=Object(L.a)(n.greetingFormat,i,a)),i}const G={inspect:e=>{const{config:t,state:n,connectorArgs:a}=e;return{props:{canDisplayGreetingModule:a.canDisplayGreetingModule,greetingFadeIn:a.startGreetingAnimation,isImageEnabled:n.isImageEnabled,shouldAnimationStart:n.shouldAnimationStart,switchDegreeUnits:a.switchDegreeUnits,weatherProps:{alternateDegreeButtonProps:Object.assign(Object.assign({},a.getTelemetryItem("weather_today",U.c.StructuredData,"",n.weatherText+n.degreeUnit+"|"+n.alternateDegreeUnit)),{children:n.alternateDegreeUnit}),degreeUnit:n.degreeUnit,weatherGlyph:n.weatherGlyph,weatherText:n.weatherText},welcomeText:k(t,a.accountSettings)},missingChildren:[]}}};class N extends j.a{constructor(e,t,n,a,i,r){super(e,t,n,a,i,r),this.animationDelayDefault=2e3,this.updateWeatherDataState=()=>{const e=this.weatherDataConnector.getCurrentState();this.sendWeatherUpdateActions(e)},this.switchDegreeUnits=e=>Object(f.b)(this,void 0,void 0,(function*(){const t=e.includes("C")?I.d.Celsius:I.d.Fahrenheit,n=this.weatherDataConnector.getCurrentState();this.weatherDataConnector.updateSettingsAndFetch(n.locationDetectionSetting,n.currentLocation,t),this.trackExperienceChangesForPageReveal()})),this.getTelemetryItem=(e,t,n,a)=>this.telemetryObject.addOrUpdateChild({name:e,behavior:U.b.Customize,content:{headline:a||e,type:t},destinationUrl:n||""}).render(),this.pageSettingsDataConnector=n.connector(E.a.ChromiumPageSettings),this.pageSettingsDataConnector||(this.pageSettingsDataConnector=new W.a(E.a.ChromiumPageSettings,"",n,new x.a,i))}updateWeatherIconFromStateChange(e){const t=e&&e.params;!t||t.length<1||(this.bingImageEnabled=t[0].imageOfTheDayEnabled,C.updateIsImageEnabled.getActionSender(this).send(this.bingImageEnabled))}startAnimationWithDelay(e){setTimeout(()=>{C.shouldAnimationStart.getActionSender(this).send(!0)},e)}sendWeatherUpdateActions(e){if(!e.currentCondition)return;const t=e.currentCondition.image&&e.currentCondition.image.alt;this.currentWeatherIconId=e.currentCondition.pvdrIcon,C.updateWeatherData.getActionSender(this).send(Object.assign({imageSkyCode:this.currentWeatherIconId,ariaLabel:t},this.getTelemetryItem(d,U.c.StructuredData,e.currentCondition.deepLink,e.currentCondition.currentTemperature+e.currentCondition.degreeSetting+"|"+e.currentCondition.alternateDegreeSetting)),e.currentCondition.currentTemperature,e.currentCondition.degreeSetting,e.currentCondition.alternateDegreeSetting)}mapStateToProps(e){const t={config:this.config,state:e,connectorArgs:{getTelemetryItem:this.getTelemetryItem,startGreetingAnimation:P,canDisplayGreetingModule:this.canDisplayGreetingModule,accountSettings:this.primaryAccountSettings,switchDegreeUnits:this.switchDegreeUnits}},n=G.inspect(t);return Object.assign(Object.assign({},n.props),this.telemetryTags)}onComponentConnect(e){return Object(f.b)(this,void 0,void 0,(function*(){yield j.a.prototype.onComponentConnect.call(this,e);const t=H.b.ClientSettings,n=this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getCurrentState();let a=n&&n.configData;this.pageSettingsDataConnector&&void 0===a&&(a=yield this.pageSettingsDataConnector.getConfigDataAsync()),this.telemetryObject&&this.telemetryObject.contract&&(this.telemetryObject.contract.behavior=U.b.Show,this.telemetryObject.contract.destinationUrl=location?location.href:"");"true"!==t.static_page&&a.isNewTabGreetingEnabled&&(this.primaryAccountSettings=n.primaryAccountInfo,this.canDisplayGreetingModule=this.primaryAccountSettings.accountType===v.c.MSA),this.canDisplayGreetingModule||C.disableGreetingModule.getActionSender(this).send(!0),j.a.prototype.onComponentConnect.call(this,e),O.a.getInstance().rootReducer.getDataConnector(E.a.WeatherData).then(e=>Object(f.b)(this,void 0,void 0,(function*(){e&&(this.weatherDataConnector=e,this.getWeatherData())})))}))}revalidateExperienceStaleState(e){const t=Object.create(null,{revalidateExperienceStaleState:{get:()=>super.revalidateExperienceStaleState}});return Object(f.b)(this,void 0,void 0,(function*(){t.revalidateExperienceStaleState.call(this,e),e&&this.getWeatherData()}))}getWeatherData(){this.setupWeatherDataObservers(),this.weatherDataConnector.fetchActiveStateforWeather().then(e=>Object(f.b)(this,void 0,void 0,(function*(){if(this.config.hasWhiteIconTransitions&&(this.bingImageEnabled=(yield this.pageSettingsDataConnector.getPageSettingsStateAsync()).imageOfTheDayEnabled,C.updateIsImageEnabled.getActionSender(this).send(this.bingImageEnabled),F.a.updateLayout.registerObserver(e=>{this.updateWeatherIconFromStateChange(e)})),e){const e=this.weatherDataConnector.getCurrentState();this.sendWeatherUpdateActions(e),this.startAnimationWithDelay(this.config.animationDelay||this.animationDelayDefault),this.telemetryObject&&this.telemetryObject.contract&&e.currentCondition&&(this.telemetryObject.contract.destinationUrl=e.currentCondition.deepLink?e.currentCondition.deepLink:this.telemetryObject.contract.destinationUrl,e.currentCondition.currentTemperature&&e.currentCondition.degreeSetting&&e.currentCondition.alternateDegreeSetting&&(this.telemetryObject.contract=Object.assign(Object.assign({},this.telemetryObject.contract),{content:{headline:e.currentCondition.currentTemperature+e.currentCondition.degreeSetting+"|"+e.currentCondition.alternateDegreeSetting}})))}})))}setupWeatherDataObservers(){A.a.fetchWeatherSummarySuccess.registerObserver(this.updateWeatherDataState)}}function P(e,t,n,a){const i=new T.AnimateTo(e,{opacity:0},{duration:a,delay:n}),r=new T.AnimateTo(t,{opacity:1},{duration:a,delay:0});i.onFinish=()=>{window.requestAnimationFrame(()=>{e.style.display="none",t.style.display="flex",i.cancel(),r.play()})},i.play()}var R=n("05Au");class M{reduce(e,t){if(!e)return{};let n,a=!1;return t?(a=a||R.a.handleAction(t,C.updateIsImageEnabled,t=>{n=Object.assign(Object.assign({},e),{isImageEnabled:t})}),a=a||R.a.handleAction(t,C.updateWeatherData,(t,a,i,r)=>{n=Object.assign(Object.assign({},e),{weatherGlyph:t,weatherText:a,degreeUnit:i,alternateDegreeUnit:r})}),a=a||R.a.handleAction(t,C.shouldAnimationStart,t=>{n=Object.assign(Object.assign({},e),{shouldAnimationStart:t})}),a=a||R.a.handleAction(t,C.disableGreetingModule,t=>{n=Object.assign(Object.assign({},e),{canDisplayGreetingModule:!t})}),n||e):e}}var _=n("SP+O"),z=n("rRWH");const B={alternateUnitText:{background:"transparent !important",border:"none !important",color:"inherit !important",height:"fit-content !important","line-height":"inherit !important","min-width":"0px !important",opacity:"inherit",padding:"0px !important","text-decoration":"none","&:hover":{opacity:"1"}},hiddenUnit_container:{display:"flex",opacity:"0",visibility:"hidden"},visibleUnit_container:{display:"flex",opacity:"0.75",visibility:""},greeting_root:{display:"flex","font-size":"14px",height:"50px",width:"fit-content"},textWrapper_ImageHidden:{color:_.c},textWrapper_ImageDisplayed:{color:"#FFFFFF"},weatherGlyph:{float:"left",height:"24px","margin-bottom":"auto","margin-top":"auto",width:"24px"},weather_container:{cursor:"default",display:"none",opacity:"0",padding:"0px 5px 0px 5px","text-decoration":"none"},weatherUnit_container:{display:"flex","padding-top":"13px",width:"max-content"},weatherText:{"font-size":"24px","margin-bottom":"auto","margin-top":"auto",padding:Object(z.c)("0px 4px 3px 10px","0px 10px 3px 4px")},welcomeText:{display:"flex","font-size":"14px","line-height":"20px","margin-bottom":"auto","padding-top":"5px",opacity:"1","white-space":"pre-wrap",width:"120px"},unitDivider:{"font-size":"11px",opacity:"inherit",margin:"1px 8px 0px 8px"}};var J=n("+viU"),Y=n("B9k1"),q=n("ZG2z");const K=Object(J.a)(B)(w),Z={reactComponent:K,experienceConfigSchema:b.WelcomeGreetingConfigSchema,defaultMockState:a.mockDefaultState,mockState:a.mockState,mockConfig:Y.mockConfig,mockConnectorArgs:q.mockConnectorArgs,inspector:G.inspect}},ZG2z:function(e,t){},kpPY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r}));n("nwjK");function a(e,...t){return e.replace(/{(\d+)}/g,(function(e,n){if(n>=t.length)return e;const a=t[n];return"number"==typeof a||a?a:""}))}function i(e,t,n=0){return!(!e||!t)&&e.substr(n,t.length)===t}function r(e){return!e||!e.trim()}},ubYE:function(e,t){}}]);